(function(){window.Tools={getRandom:function(b,a){b=Math.ceil(b);a=Math.ceil(a);return Math.floor(Math.random()*(a-b+1))+b}}})();(function(){var d=[];var a="absolute";function c(e){e=e||{};this.x=e.x||0;this.y=e.y||0;this.width=e.width||20;this.height=e.height||20;this.backgroundColor=e.backgroundColor||"darkgreen"}c.prototype={constructor:c,render:function(f){b();this.x=Tools.getRandom(0,Math.floor(f.offsetWidth/this.width)-1)*this.width;this.y=Tools.getRandom(0,Math.floor(f.offsetHeight/this.height)-1)*this.height;var e=document.createElement("div");f.appendChild(e);e.setAttribute("id","food");e.style.left=this.x+"px";e.style.top=this.y+"px";e.style.width=this.width+"px";e.style.height=this.height+"px";e.style.backgroundColor=this.backgroundColor;e.style.position=a;d.push(e)}};function b(){for(var e=d.length-1;e>=0;e--){d[e].parentNode.removeChild(d[e]);d.splice(e,1)}}window.Food=c})();(function(){var c=[];var a="absolute";function b(e){e=e||{};this.width=e.width||20;this.height=e.height||20;this.direction=e.direction||"right";this.body=[{x:3,y:2,backgroundColor:"red"},{x:2,y:2,backgroundColor:"blue"},{x:1,y:2,backgroundColor:"blue"}]}b.prototype={constructor:b,render:function(h){d();for(var f=0,g=this.body.length;f<g;f++){var j=this.body[f];var e=document.createElement("div");h.appendChild(e);e.style.position=a;e.style.width=this.width+"px";e.style.height=this.height+"px";e.style.left=j.x*this.width+"px";e.style.top=j.y*this.height+"px";e.style.backgroundColor=j.backgroundColor;c.push(e)}},move:function(){for(var e=this.body.length-1;e>0;e--){this.body[e].x=this.body[e-1].x;this.body[e].y=this.body[e-1].y}switch(this.direction){case"right":this.body[0].x++;break;case"left":this.body[0].x--;break;case"up":this.body[0].y--;break;case"down":this.body[0].y++}return this},ateFood:function(k,j){const i=this.body[0].x*this.width;const h=this.body[0].y*this.height;const f=k.x;const e=k.y;if(i===f&&h===e){k.render(j);var g=this.body[this.body.length-1];this.body.push({x:g.x,y:g.y,backgroundColor:g.backgroundColor})}}};function d(){for(var e=c.length-1;e>=0;e--){c[e].parentNode.removeChild(c[e]);c.splice(e,1)}}window.Snake=b})();(function(){var d=null;function c(e){this.food=new Food();this.snake=new Snake();this.map=e}c.prototype={constructor:c,start:function(){this.food.render(this.map);this.snake.render(this.map);b(this);a(this)}};function a(e){document.body.addEventListener("keydown",function(g){var h=g||window.event;var f=this.snake.direction;switch(h.code){case"ArrowUp":this.snake.direction=f!=="down"?"up":"down";break;case"ArrowDown":this.snake.direction=f!=="up"?"down":"up";break;case"ArrowLeft":this.snake.direction=f!=="right"?"left":"right";break;case"ArrowRight":this.snake.direction=f!=="left"?"right":"left"}}.bind(e))}function b(e){if(d===null){const g=Math.floor(e.map.clientWidth/e.snake.width);const f=Math.floor(e.map.clientHeight/e.snake.height);d=window.setInterval(function(){this.snake.move();var i=this.snake.body[0].x;var h=this.snake.body[0].y;if(i<0||i>=g||h<0||h>=f){window.alert("Game Over");window.clearInterval(d);d=null;return}this.snake.ateFood(this.food,this.map);this.snake.render(this.map)}.bind(e),150)}}window.Game=c})();(function(){new Game(document.getElementById("map")).start()})();
